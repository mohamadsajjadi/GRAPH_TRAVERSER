به نام خدا


# آشنایی با نحوه پروفایل برنامه (Profiling)

## اهداف 
- آشنایی با مفهوم پروفایل کردن برنامه‌ها با هدف بررسی وضعیت اجرای آن‌ها و نحوه مصرف منابع توسط قسمت‌های مختلف برنامه و یافتن نقاطی از کد که از این منظر به خوبی عمل نمی‌کنند و اصلاح آن‌ها

## نیازمندی‌ها
- آشنایی با زبان برنامه‌نویسی جاوا

## ابزارهای مورد استفاده
- IntelliJ IDEA (ترجیحاً نسخه 2018 به بعد)
- Yourkit

## منابع آموزشی
- [آشنایی با Profiling](https://aparat.com/v/9NdSe) 
- [مثالی از Profiling](https://aparat.com/v/2mWbs)
- [پروژه‌ی ProfilingTest](https://github.com/ssc-public/Software-Engineering-Lab/tree/main/base-projects/ProfilingTest)

## روال انجام آزمایش
نرم‌افزار YourKit Java Profiler یک نرم‌افزار تجاری است که برای سیستم‌ عامل‌های مختلفی از جمله ویندوز، مک، لینوکس و سولاریس قابل استفاده است. با مراجعه به [این آدرس](https://www.yourkit.com/java/profiler/download) می‌توانید بسته به نوع سیستم عامل خود، نسخه مناسب را دانلود کرده و در مدت ۱۵روز مجوز استفاده رایگان آن را دریافت نمایید. بعد از اتمام این دوره لازم است لایسنس آن را بر حسب نیاز خریداری کنید. البته نسخه‌های قدیمی‌تر آن به صورت کرک شده از سایت‌های ایرانی (مانند [یاس دانلود](http://dl.downloadly.ir/Files/Software/YourKit_Java_Profiler_12.0.2_Downloadly.ir.rar)) نیز قابل دریافت است.

![image](https://user-images.githubusercontent.com/45389673/232209757-322b8b37-14ab-45ac-a33d-863ae867a363.png)

در صورت استفاده از نسخه آزمایشی Yourkit پس از تکمیل نصب، نرم‌افزار را باز کنید و با انتخاب گزینه Get Free Evaluation Key، ایمیل خود را جهت ارسال لینک فعال‌سازی نرم‌افزار وارد نمایید. با این کار، ابزار به صورت آزمایشی برای یک دوره زمانی 15روزه قابل استفاده خواهد بود.

در صورت استفاده از نسخه کرک شده، با استفاده از cmd (Run as administrator) به مسیر پوشه Crack رفته و دستور java –jar yjp.jar را اجرا می‌کنیم. با اجرای این دستور پنجره‌ای باز می‌شود که باید در قسمت Name یک نام را وارد نموده و سپس گزینه Patch را انتخاب کنید. مسیر فایل yjp.jar در فولدر lib محل نصب Yourkit را وارد کرده و سپس منتظر تکمیل عملیات و اجرای Generate برای تولید کد کرک می‌شویم.
 
 ![image](https://user-images.githubusercontent.com/45389673/232209759-7611ac27-4588-43f5-be99-c10d17c0cc6c.png)
 
بعد از دانلود و سپری کردن مراحل عادی نصب برنامه، icon آن در IntelliJ ظاهر می‌شود. در غیر این صورت plugin آن را نیز لازم است در محیط IntelliJ نصب کنید. البته قبل از آن لازم است pluginهای قبلی را در صورت وجود uninstall نمایید.

نرم‌افزار Yourkit را باز کرده و گزینه Integrate with IDE را انتخاب و IntelliJ را به آن معرفی کنید. در صورتی که نسخه IntelliJ بالاتر از Yourkit باشد (مخصوصاً در مورد نسخه کرک شده)، لازم است گزینه دوم را انتخاب نموده و چنانچه با خطا مواجه شدید، به صورت دستی فایل yourkit-for-idea واقع در مسیر نصب Yourkit و قسمت
`
YourKit Java Profiler 12.0.2\lib\idea80-plugin
`
را در فولدر lib در محل نصب IntelliJ کپی نمایید. سپس پروژه ProfilingTest را در محیط IntelliJ باز کنید.

![image](https://user-images.githubusercontent.com/45389673/232209927-a8d39ad0-c300-4c32-9134-deb384474144.png)

![image](https://user-images.githubusercontent.com/45389673/232209775-6c0e23cf-9824-4c56-88e5-6bea682fd7d3.png)

## تمرین
1. از پروژه ProfilingTest، عملیات Profiling را با استفاده از Yourkit بر روی کلاس JavaCup اجرا نموده و تابعی از پروژه که بیش‌ترین مصرف منابع را دارد شناسایی کنید و آن را در گزارش خود در فایل README توضیح دهید. سپس نحوه پیاده‌سازی آن تابع را به گونه‌ای تغییر دهید که مصرف منابع نسبت به قبل بهتر شود.
2. قطعه کد دیگری (به جز الگوریتم‌های مرتب‌سازی و فیبوناچی) به زبان جاوا بنویسید و سپس عملیات Profiling را با استفاده از Yourkit بر روی آن اجرا و بخشی از کد که بیش‌ترین مصرف منابع را دارد شناسایی کنید. الگوریتم پیاده‌سازی آن قسمت را به گونه‌ای تغییر دهید که این مشکل برطرف شده و مصرف منابع نسبت به حالت فعلی بهتر شود. توجه داشته باشید کامنت کردن کد و یا صرفنظر کردن از اجرای آن و موارد مشابه قابل قبول نیست. همراه با ارسال پروژه لازم است گزارشی در مورد عملکرد کد و نحوه برطرف شدن مشکل در پیاده‌سازی جدید را ارائه نمایید. گزارش باید حاوی تصاویری از وضعیت مصرف کلیه منابع در حالت قبل و بعد از پیاده‌سازی جدید باشد.

## نحوه ارسال پروژه
یک پوشه با عنوان شماره دانشجویی اعضای گروه ایجاد نموده و کل پروژه را از طریق سامانه cw ارسال نمایید. آدرس مخزن پروژه خود را نیز در گزارش خود ذکر کنید. توجه کنید که مخزن شما عمومی (public) باشد.
